<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to ggip • ggip</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ggip">
<meta property="og:description" content="ggip">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggip</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggip.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/visualizing-ip-data.html">Visualizing IP data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/davidchall/ggip/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ggip_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to ggip</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidchall/ggip/blob/master/vignettes/ggip.Rmd"><code>vignettes/ggip.Rmd</code></a></small>
      <div class="hidden name"><code>ggip.Rmd</code></div>

    </div>

    
    
<p>The ggip package provides data visualization of IP addresses and networks. It achieves this by mapping one-dimensional IP data onto a two-dimensional grid.</p>
<p>This introductory vignette gives a quickstart guide on how to use ggip functions to generate plots.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://davidchall.github.io/ggip">ggip</a></span>)
</pre></div>
<div id="configuring-the-coordinate-system" class="section level2">
<h2 class="hasAnchor">
<a href="#configuring-the-coordinate-system" class="anchor"></a>Configuring the coordinate system</h2>
<p>The central component of any ggip plot is the coordinate system, as specified by <code><a href="../reference/coord_ip.html">coord_ip()</a></code>. It determines exactly how IP data is mapped to the 2D grid, and ensures this mapping is applied consistently across all plotted layers.</p>
<p>The <code><a href="../reference/coord_ip.html">coord_ip()</a></code> function must be called once per plot, and takes arguments:</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="82%">
</colgroup>
<thead><tr class="header">
<th align="left">Argument</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>canvas_network</code></td>
<td align="left">The region of IP space visualized by the entire 2D grid. By default, the entire IPv4 space is visualized. This argument allows you to zoom into a region of IP space or to visualize IPv6 space.</td>
</tr>
<tr class="even">
<td align="left"><code>pixel_prefix</code></td>
<td align="left">The network prefix length corresponding to a pixel in the 2D grid. Increasing this argument effectively improves the resolution of the plot.</td>
</tr>
<tr class="odd">
<td align="left"><code>curve</code></td>
<td align="left">The path taken across the 2D grid while mapping IP data.</td>
</tr>
</tbody>
</table>
<p>More details about this mapping are found in <code><a href="../articles/visualizing-ip-data.html">vignette("visualizing-ip-data")</a></code>.</p>
</div>
<div id="internal-data-transformation" class="section level2">
<h2 class="hasAnchor">
<a href="#internal-data-transformation" class="anchor"></a>Internal data transformation</h2>
<p>Behind the scenes, ggip searches the plotted data sets for any columns that are <code>ip_address()</code> or <code>ip_network()</code> vectors. For each matching column, it replaces the vector with a data frame containing both the original IP data and the mapped Cartesian coordinates. This means the plotted data set now contains a nested data frame column.</p>
<p>As an example, consider a data set featuring two columns. The <code>label</code> column is a character vector and the <code>address</code> column is an <code>ip_address()</code> vector.</p>
<pre><code>#&gt; # A tibble: 3 x 2
#&gt;   label         address
#&gt;   &lt;chr&gt;       &lt;ip_addr&gt;
#&gt; 1 A             0.0.0.0
#&gt; 2 B         192.168.0.1
#&gt; 3 C     255.255.255.255</code></pre>
<p>This data set is transformed such that the <code>address</code> column is now a data frame. It contains an <code>ip</code> column with the original <code>ip_address()</code> vector, and <code>x</code> and <code>y</code> columns with the Cartesian coordinates on the 2D grid.</p>
<pre><code>#&gt; # A tibble: 3 x 2
#&gt;   label      address$ip    $x    $y
#&gt;   &lt;chr&gt;       &lt;ip_addr&gt; &lt;int&gt; &lt;int&gt;
#&gt; 1 A             0.0.0.0     0   255
#&gt; 2 B         192.168.0.1   214   142
#&gt; 3 C     255.255.255.255   255   255</code></pre>
<p>These transformed data frame columns are available when specifying aesthetics. The nested columns can be accessed using the usual <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> syntax (see examples below).</p>
</div>
<div id="using-layers-from-ggplot2-and-other-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#using-layers-from-ggplot2-and-other-packages" class="anchor"></a>Using layers from ggplot2 and other packages</h2>
<p>Layers from ggplot2 and other external packages don’t know about the internal data transformation used by ggip. For this reason, these layers expect their positional aesthetics (e.g. <code>x</code> and <code>y</code>) to be specified explicitly. Fortunately, we can extract the Cartesian coordinates from our data frame columns using the <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> syntax.</p>
<p>As an example, we plot an <code>ip_address()</code> vector as points accompanied by labels. Note that we’ve specified the <code>x</code>, <code>y</code> and <code>label</code> aesthetics at the top level of the plot, and then the <code>geom_point()</code> and <code>geom_label()</code> layers have picked them up later.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(address = <span class="fu">ip_address</span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"0.0.0.0"</span>, <span class="st">"128.0.0.0"</span>, <span class="st">"192.168.0.1"</span>))) <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x = <span class="kw">address</span><span class="op">$</span><span class="kw">x</span>, y = <span class="kw">address</span><span class="op">$</span><span class="kw">y</span>, label = <span class="kw">address</span><span class="op">$</span><span class="kw">ip</span>)) <span class="op">+</span>
  <span class="fu">geom_point</span>() <span class="op">+</span>
  <span class="fu">geom_label</span>(nudge_x = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">10</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">10</span>), nudge_y = <span class="op">-</span><span class="fl">10</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span>(expand = <span class="fl">TRUE</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_ip.html">theme_ip_light</a></span>()
</pre></div>
<p><img src="ggip_files/figure-html/unnamed-chunk-2-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>Similarly, we plot <code>ip_network()</code> vectors using layers corresponding to rectangles.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">iana_ipv4</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span>(<span class="fu">aes</span>(xmin = <span class="kw">network</span><span class="op">$</span><span class="kw">xmin</span>, ymin = <span class="kw">network</span><span class="op">$</span><span class="kw">ymin</span>, xmax = <span class="kw">network</span><span class="op">$</span><span class="kw">xmax</span>, ymax = <span class="kw">network</span><span class="op">$</span><span class="kw">ymax</span>)) <span class="op">+</span>
  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(fill = <span class="kw">allocation</span>)) <span class="op">+</span>
  <span class="fu">scale_fill_brewer</span>(palette = <span class="st">"Accent"</span>, name = <span class="kw">NULL</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_ip.html">theme_ip_dark</a></span>()
</pre></div>
<p><img src="ggip_files/figure-html/unnamed-chunk-3-1.png" width="80%" style="display: block; margin: auto;"></p>
<p><strong>Note:</strong> There are small gaps between the rectangles because networks are mapped onto a 2D grid (i.e. discrete), whereas ggplot2 visualizes the continuous 2D plane. This can be resolved by adding/subtracting 0.5 to the positional aesthetics. However, this gap is often helpful to distinguish networks.</p>
</div>
<div id="using-ggip-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#using-ggip-layers" class="anchor"></a>Using ggip layers</h2>
<p>Layers from ggip <strong>do</strong> know about the internal data transformation, so they take an <code>ip</code> aesthetic corresponding to the data frame column. They can then automatically extract the relevant positional information. This is easier because the name of the data frame column is also the name of the original <code>ip_address()</code> or <code>ip_network()</code> column in the input data set.</p>
<p>As an example, we plot a heatmap of an <code>ip_address()</code> vector.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(address = <span class="fu">sample_ipv4</span>(<span class="fl">10000</span>)) <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span>(<span class="fu">aes</span>(ip = <span class="kw">address</span>)) <span class="op">+</span>
  <span class="fu"><a href="../reference/stat_summary_address.html">stat_summary_address</a></span>() <span class="op">+</span>
  <span class="fu">scale_fill_viridis_c</span>(guide = <span class="st">"none"</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_ip.html">theme_ip_dark</a></span>()
</pre></div>
<p><img src="ggip_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Hall.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
