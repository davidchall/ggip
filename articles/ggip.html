<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggip">
<title>Introduction to ggip • ggip</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ggip">
<meta property="og:description" content="ggip">
<meta property="og:image" content="https://davidchall.github.io/ggip/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggip</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/ggip.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/visualizing-ip-data.html">Visualizing IP data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/davidchall/ggip/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introduction to ggip</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidchall/ggip/blob/HEAD/vignettes/ggip.Rmd" class="external-link"><code>vignettes/ggip.Rmd</code></a></small>
      <div class="d-none name"><code>ggip.Rmd</code></div>
    </div>

    
    
<p>The ggip package provides data visualization of IP addresses and
networks. It achieves this by mapping one-dimensional IP data onto a
two-dimensional grid.</p>
<p>This introductory vignette gives a quickstart guide on how to use
ggip functions to generate plots.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://davidchall.github.io/ipaddress/" class="external-link">ipaddress</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://davidchall.github.io/ggip/">ggip</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="configuring-the-coordinate-system">Configuring the coordinate system<a class="anchor" aria-label="anchor" href="#configuring-the-coordinate-system"></a>
</h2>
<p>The central component of any ggip plot is the coordinate system, as
specified by <code><a href="../reference/coord_ip.html">coord_ip()</a></code>. It determines exactly how IP data
is mapped to the 2D grid, and ensures this mapping is applied
consistently across all plotted layers.</p>
<p>The <code><a href="../reference/coord_ip.html">coord_ip()</a></code> function must be called once per plot,
and takes arguments:</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="82%">
</colgroup>
<thead><tr class="header">
<th align="left">Argument</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>canvas_network</code></td>
<td align="left">The region of IP space visualized by the entire 2D
grid. By default, the entire IPv4 space is visualized. This argument
allows you to zoom into a region of IP space or to visualize IPv6
space.</td>
</tr>
<tr class="even">
<td align="left"><code>pixel_prefix</code></td>
<td align="left">The network prefix length corresponding to a pixel in
the 2D grid. Increasing this argument effectively improves the
resolution of the plot.</td>
</tr>
<tr class="odd">
<td align="left"><code>curve</code></td>
<td align="left">The path taken across the 2D grid while mapping IP
data.</td>
</tr>
</tbody>
</table>
<p>More details about this mapping are found in
<code><a href="../articles/visualizing-ip-data.html">vignette("visualizing-ip-data")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="internal-data-transformation">Internal data transformation<a class="anchor" aria-label="anchor" href="#internal-data-transformation"></a>
</h2>
<p>Behind the scenes, ggip searches the plotted data sets for any
columns that are <code><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address()</a></code> or <code><a href="https://davidchall.github.io/ipaddress/reference/ip_network.html" class="external-link">ip_network()</a></code>
vectors. For each matching column, it replaces the vector with a data
frame containing both the original IP data and the mapped Cartesian
coordinates. This means the plotted data set now contains a nested data
frame column.</p>
<p>As an example, consider a data set featuring two columns. The
<code>label</code> column is a character vector and the
<code>address</code> column is an <code><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address()</a></code> vector.</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   label         address</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;ip_addr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> A             0<span style="color: #949494;">.</span>0<span style="color: #949494;">.</span>0<span style="color: #949494;">.</span>0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> B         192<span style="color: #949494;">.</span>168<span style="color: #949494;">.</span>0<span style="color: #949494;">.</span>1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> C     255<span style="color: #949494;">.</span>255<span style="color: #949494;">.</span>255<span style="color: #949494;">.</span>255</span></span></code></pre>
<p>This data set is transformed such that the <code>address</code>
column is now a data frame. It contains an <code>ip</code> column with
the original <code><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address()</a></code> vector, and <code>x</code> and
<code>y</code> columns with the Cartesian coordinates on the 2D
grid.</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   label      address$ip    $x    $y</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;ip_addr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> A             0<span style="color: #949494;">.</span>0<span style="color: #949494;">.</span>0<span style="color: #949494;">.</span>0     0   255</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> B         192<span style="color: #949494;">.</span>168<span style="color: #949494;">.</span>0<span style="color: #949494;">.</span>1   214   142</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> C     255<span style="color: #949494;">.</span>255<span style="color: #949494;">.</span>255<span style="color: #949494;">.</span>255   255   255</span></span></code></pre>
<p>These transformed data frame columns are available when specifying
aesthetics. The nested columns can be accessed using the usual
<code>$</code> syntax (see examples below).</p>
</div>
<div class="section level2">
<h2 id="using-layers-from-ggplot2-and-other-packages">Using layers from ggplot2 and other packages<a class="anchor" aria-label="anchor" href="#using-layers-from-ggplot2-and-other-packages"></a>
</h2>
<p>Layers from ggplot2 and other external packages don’t know about the
internal data transformation used by ggip. For this reason, these layers
expect their positional aesthetics (e.g. <code>x</code> and
<code>y</code>) to be specified explicitly. Fortunately, we can extract
the Cartesian coordinates from our data frame columns using the
<code>$</code> syntax.</p>
<p>As an example, we plot an <code><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address()</a></code> vector as points
accompanied by labels. Note that we’ve specified the <code>x</code>,
<code>y</code> and <code>label</code> aesthetics at the top level of the
plot, and then the <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point()</a></code> and
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label()</a></code> layers have picked them up later.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>address <span class="op">=</span> <span class="fu"><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0.0.0.0"</span>, <span class="st">"128.0.0.0"</span>, <span class="st">"192.168.0.1"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">address</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">address</span><span class="op">$</span><span class="va">y</span>, label <span class="op">=</span> <span class="va">address</span><span class="op">$</span><span class="va">ip</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>nudge_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span>, nudge_y <span class="op">=</span> <span class="op">-</span><span class="fl">10</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_ip.html">theme_ip_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggip_files/figure-html/unnamed-chunk-2-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Similarly, we plot <code><a href="https://davidchall.github.io/ipaddress/reference/ip_network.html" class="external-link">ip_network()</a></code> vectors using layers
corresponding to rectangles.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iana_ipv4</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="va">network</span><span class="op">$</span><span class="va">xmin</span>, ymin <span class="op">=</span> <span class="va">network</span><span class="op">$</span><span class="va">ymin</span>, xmax <span class="op">=</span> <span class="va">network</span><span class="op">$</span><span class="va">xmax</span>, ymax <span class="op">=</span> <span class="va">network</span><span class="op">$</span><span class="va">ymax</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_rect</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">allocation</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Accent"</span>, name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_ip.html">theme_ip_dark</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggip_files/figure-html/unnamed-chunk-3-1.png" width="600" style="display: block; margin: auto;"></p>
<p><strong>Note:</strong> There are small gaps between the rectangles
because networks are mapped onto a 2D grid (i.e. discrete), whereas
ggplot2 visualizes the continuous 2D plane. This can be resolved by
adding/subtracting 0.5 to the positional aesthetics. However, this gap
is often helpful to distinguish networks.</p>
</div>
<div class="section level2">
<h2 id="using-ggip-layers">Using ggip layers<a class="anchor" aria-label="anchor" href="#using-ggip-layers"></a>
</h2>
<p>Layers from ggip <strong>do</strong> know about the internal data
transformation, so they take an <code>ip</code> aesthetic corresponding
to the data frame column. They can then automatically extract the
relevant positional information. This is easier because the name of the
data frame column is also the name of the original
<code><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address()</a></code> or <code><a href="https://davidchall.github.io/ipaddress/reference/ip_network.html" class="external-link">ip_network()</a></code> column in the
input data set.</p>
<p>As an example, we plot a heatmap of an <code><a href="https://davidchall.github.io/ipaddress/reference/ip_address.html" class="external-link">ip_address()</a></code>
vector.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>address <span class="op">=</span> <span class="fu"><a href="https://davidchall.github.io/ipaddress/reference/sample.html" class="external-link">sample_ipv4</a></span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ip <span class="op">=</span> <span class="va">address</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_summary_address.html">stat_summary_address</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_ip.html">theme_ip_dark</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggip_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Hall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
