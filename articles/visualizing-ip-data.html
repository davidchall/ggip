<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggip">
<title>Visualizing IP data • ggip</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualizing IP data">
<meta property="og:description" content="ggip">
<meta property="og:image" content="https://davidchall.github.io/ggip/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggip</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/ggip.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/visualizing-ip-data.html">Visualizing IP data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/davidchall/ggip/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Visualizing IP data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidchall/ggip/blob/HEAD/vignettes/visualizing-ip-data.Rmd" class="external-link"><code>vignettes/visualizing-ip-data.Rmd</code></a></small>
      <div class="d-none name"><code>visualizing-ip-data.Rmd</code></div>
    </div>

    
    
<p><em>This vignette assumes an understanding of IP addresses and
networks.</em> <em>Please consult
<code><a href="https://davidchall.github.io/ipaddress/articles/ipaddress-classes.html" class="external-link">vignette("ipaddress-classes", "ipaddress")</a></code> for a very basic
introduction.</em></p>
<p>Data visualization of the IP address space is challenging because
there are so many unique addresses (approximately 4.3 billion for IPv4
and <span class="math inline">\(3.8 \times 10^{38}\)</span> for IPv6).
Owing to the hierarchical nature of address space, we must plot the
addresses on a discrete scale (not a continuous scale). It’s simply not
possible to display (or interpret) such a large number of discrete
levels simultaneously.</p>
<p>There are a few actions we can take to improve the situation:</p>
<ol style="list-style-type: decimal">
<li>Visualize a reduced number of discrete levels by:
<ol style="list-style-type: lower-alpha">
<li>Showing only a subnetwork of the full address space (i.e. filtering
leading bits)</li>
<li>Limiting the resolution by summarizing data within networks
(i.e. neglecting trailing bits)</li>
</ol>
</li>
<li>Transform the one-dimensional address space onto the two-dimensional
plane</li>
</ol>
<p>These are handled by the <code>canvas_network</code>,
<code>pixel_prefix</code> and <code>curve</code> arguments of
<code><a href="../reference/coord_ip.html">coord_ip()</a></code>, respectively. This vignette describes these
actions in more detail.</p>
<div class="section level2">
<h2 id="reducing-visualized-information">Reducing visualized information<a class="anchor" aria-label="anchor" href="#reducing-visualized-information"></a>
</h2>
<p>As an example, consider the 32-bit representation of the IPv4 address
<code>192.168.0.124</code>. If we wanted to visualize this single
address within the full context of the IPv4 address space, we’d need to
simultaneously display <span class="math inline">\(2^{32}\)</span>
discrete levels (roughly 4.3 billion).</p>
<p><img src="bits_raw.png" width="100%"></p>
<p>To reduce the visualized information, we could only show a subnetwork
of the full address space. In our example, we could only display the
<code>192.0.0.0/8</code> network using
<code>coord_ip(canvas_network = ip_network("192.0.0.0/8"))</code>. This
would effectively filter addresses where the leading 8 bits match the
specified network, thereby reducing the number of discrete levels to
<span class="math inline">\(2^{24}\)</span> (roughly 16.8 million).</p>
<p><img src="bits_half_reduced.png" width="100%"></p>
<p>Alternatively, we could make each discrete level represent a network
of addresses. To do this, we’d need to use a summary function to reduce
the network data to a single value. In our example, we could make each
discrete level represent a network with a prefix length of 24 using
<code>coord_ip(pixel_prefix = 24)</code>. This would effectively neglect
the trailing 8 bits of the 32-bit address, thereby further reducing the
number of discrete levels to <span class="math inline">\(2^{16}\)</span>
(65,536).</p>
<p><img src="bits_reduced.png" width="100%"></p>
<p>These two techniques become even more important in the IPv6 address
space, which uses 128-bit addresses.</p>
<p><strong>Note:</strong> To prevent accidentally plotting an
unreasonably large number of discrete levels, ggip limits the number of
plotted bits to 24. This means the <code><a href="../reference/coord_ip.html">coord_ip()</a></code> arguments
must satisfy:</p>
<pre><code><span><span class="va">pixel_prefix</span> <span class="op">-</span> <span class="fu"><a href="https://davidchall.github.io/ipaddress/reference/netmask.html" class="external-link">prefix_length</a></span><span class="op">(</span><span class="va">canvas_network</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">24</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="space-filling-curves">Space-filling curves<a class="anchor" aria-label="anchor" href="#space-filling-curves"></a>
</h2>
<p>Inspired by <a href="https://xkcd.com/195/" class="external-link">an xkcd comic</a>
originally published in December 2006, we use a space-filling curve to
map IP data (one-dimensional) to Cartesian coordinates
(two-dimensional). This means our discrete levels become represented by
pixels. Two curves are commonly chosen for this task: the Hilbert curve
and the Morton curve (also known as the Z curve). Compared to other
space-filling curves, these are advantageous because they preserve
locality (i.e. subnetworks remain close together).</p>
<p>The curve order represents how nested the curve is and therefore
determines how many data points can be visualized. Conversely, choosing
the number of plotted bits (see above) determines the order of the
curve. Since space-filling curves are fractal, increasing the curve
order effectively improves the image resolution (plotted networks remain
in the same overall location).</p>
<div class="section level3">
<h3 id="hilbert-curve">Hilbert curve<a class="anchor" aria-label="anchor" href="#hilbert-curve"></a>
</h3>
<p>IP data is most commonly displayed on a Hilbert curve because it has
optimal locality preservation.</p>
<p>This curve starts in the top-left corner and ends in the top-right
corner. It is chosen using <code>coord_ip(curve = "hilbert")</code>.</p>
<p><img src="visualizing-ip-data_files/figure-html/hilbert-1.png" width="30%"><img src="visualizing-ip-data_files/figure-html/hilbert-2.png" width="30%"><img src="visualizing-ip-data_files/figure-html/hilbert-3.png" width="30%"></p>
</div>
<div class="section level3">
<h3 id="morton-curve">Morton curve<a class="anchor" aria-label="anchor" href="#morton-curve"></a>
</h3>
<p>The Morton curve technically offers slightly poorer locality
preservation than the Hilbert curve. However, the discontinuous jumps in
the curve actually correspond to crossing IP network boundaries. In this
sense, the Morton curve is a more natural representation of the IP
network structure. For example, the start and end addresses of a network
are always located diagonally across from each other.</p>
<p>This curve starts in the top-left corner and ends in the bottom-right
corner. It is chosen using <code>coord_ip(curve = "morton")</code>.</p>
<p><img src="visualizing-ip-data_files/figure-html/morton-1.png" width="30%"><img src="visualizing-ip-data_files/figure-html/morton-2.png" width="30%"><img src="visualizing-ip-data_files/figure-html/morton-3.png" width="30%"></p>
</div>
</div>
<div class="section level2">
<h2 id="putting-it-all-together">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h2>
<p>Finally, let’s consider a specific example.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/coord_ip.html">coord_ip</a></span><span class="op">(</span></span>
<span>  canvas_network <span class="op">=</span> <span class="fu"><a href="https://davidchall.github.io/ipaddress/reference/ip_network.html" class="external-link">ip_network</a></span><span class="op">(</span><span class="st">"0.0.0.0/0"</span><span class="op">)</span>,</span>
<span>  pixel_prefix <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  curve <span class="op">=</span> <span class="st">"hilbert"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This coordinate system will use a 2nd order Hilbert curve to
visualize the entire IPv4 address space, where each vertex represents a
<code>/4</code> network.</p>
<p><img src="visualizing-ip-data_files/figure-html/unnamed-chunk-6-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Hall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
